有关CH375的U盘文件级子程序库的接口说明以及例子程序
请参考CH375评估板资料CH375/EVT/PUB/CH375EVT.PDF和CH375HF.PDF
网上可供下载的压缩包文件是CH375EVT.ZIP

*****************************************************************************************

CH375LIB V3.9 最新更新 2014.09.09

一、修正BUG
 1、修正文件名首字节0xE5无法打开的情况

*****************************************************************************************

CH375LIB V3.8 最新更新 2012.07.07
CH375LIB V3.8 最新更新 2012.04.10

一、修正BUG
 1、修正CH375ByteWrite子程序 @2012.07.07
 2、修正快速分配新簇的算法，支持簇结束

*****************************************************************************************

CH375LIB V3.7 最新更新 2011.08.02

一、修正BUG
 1、修正由计算机创建的0长度文件在字节写方式下失败的问题
 2、修正不支持64K簇的问题，支持FAT16文件系统4G容量的U盘
二、更新和增加
 1、调用CH375FileOpen打开以0结束(无任何字符)的文件名，则为仅仅初始化分析文件系统
三、功能调整
 1、修改FAT32判断簇结束的方法
 2、修改CH375FileOpen和CH375FileClose子程序，优化打开FAT12/16根目录时的速度
 3、修改CH375FileLocate和CH375ByteLocate子程序，使连续移动文件指针时可以接着执行，无需从文件头开始
 4、修改CH375ByteWrite子程序，对于新分配的簇，无需先读出以节约时间
 5、用CH375FileCreate在FAT12和FAT16根目录下创建新文件时，会自动搜索被删除的目录项

*****************************************************************************************

CH375LIB V3.6 最新更新 2008.08.26

一、修正BUG
 1、修正FAT12文件系统下扇区方式写大文件

*****************************************************************************************

CH375LIB V3.5 最新更新 2007.08.16

一、修正BUG
 1、U盘读写操作出错重试仍然失败才能自动关闭文件
 2、修正部分32位单片机在FAT12文件系统下的对齐存取
二、更新和增加
 1、用磁盘缓冲区指针pDISK_BASE_BUF代替缓冲区DISK_BASE_BUF，便于缓冲区合用，由.H文件初始化
 2、支持任意的扇区大小，通常是512字节，有部分U盘可能是2K字节（支持这些U盘前请分配足够缓冲区）
 3、修改首扇区DBR/MBR的识别方法
 4、对于MCS51单片机，修改CH375vDataStart为外部变量
三、功能调整
 1、CH375HF?.H文件已更新，使用新的CH375HF?.LIB文件必须使用新的.H文件
 2、修改查询磁盘信息CH375DiskQuery，去除其包含的CH375DiskSize功能，使之只查询剩余容量，
    如果需要像原版本程序一样同时查询U盘物理容量，那么要另外调用CH375DiskSize，即修改后，
    如果先调用CH375DiskSize，再调用CH375DiskQuery，就等同于原版本的CH375DiskQuery，
    也就是说，修改后的CH375DiskQuery程序调用后不修改mCmdParam.DiskSize.mDiskSizeSec
 3、由于磁盘缓冲区指针pDISK_BASE_BUF本身不分配内存，所以主程序应该调用CH375LibInit初始化，
    使该指针指向一个容量足够大并且实际可用的缓冲区，也可定义DISK_BASE_BUF_LEN由.H文件分配
 4、市面上的大多数U盘，其扇区大小为512字节，除此之外也有一部分U盘的扇区大小为2K字节或更大，
    对于从旧版本升级到本新版本程序的应用，如果像以前那样仍然只分配512字节的磁盘缓冲区，
    那么请参考新版本例子在CH375DiskReady成功后检查CH375vSectorSize是否大于实际缓冲区大小，
    如果大于则应将该U盘视为不可支持的U盘，否则在调用CH375FileOpen等程序时会导致缓冲区溢出，
    如果参考新版本例子分配足够大小（2K甚至4K）的磁盘缓冲区，那么可以支持各种扇区大小的U盘

*****************************************************************************************

CH375LIB V3.0 最新更新 2006.08.14

一、修正BUG
 1、外部变量未初始化，有可能导致CH375FileOpen时回写U盘
二、更新和增加
 1、在.H文件中去掉了EN_CH375LIB_MORE条件编译选项，直接置为允许
 2、在CH375FileOpen子程序中增加了回调子程序xFileNameEnumer( )，用于在枚举到文件时调用，
    使用CH375vFileSize作为枚举序号，并且其值为0xFFFFFFFF，参考EXAM13可加快搜索速度
 3、增加了外部子程序xDelayAfterWrite( )，用于根据实际需要在U盘写操作后延时
 4、增加了外部子程序xDelay100uS( )，用于根据单片机实际速度调整到延时100uS
 5、增加了备份/恢复子程序库的变量的子程序CH375SaveVariable( )，
    用于子程序库在多个CH375芯片之间进行切换
 6、子程序内部去掉CH375FileEnumer和CH375FileQuery两个子程序，节约内部代码，
    由.H文件提供可由条件编译控制的外部子程序实现向前兼容
 7、去掉CH375DiskReady对CH375S芯片的支持，另增加了CH375sDiskReady子程序兼顾CH375S，
    两者的唯一区别就是，后者还支持CH375S芯片(已停产)，当然，使用后者会少量增加代码量
 8、修改CH375vDiskRoot始终为32位变量，对于MCS51单片机，修改CH375vDiskRoot为外部变量
    修改CH375vFdtLba为内部变量，修改CH375IntStatus始终为内部变量
 9、查询U盘是否连接或断开，建议使用CH375DiskConnect子程序，不推荐用xQueryInterrupt
 10、将单OBJ文件改为多OBJ文件，便于在链接时节约代码量
三、已知问题
 1、暂不支持内置USB-HUB的复合U盘，需要支持请选用CH374LIB及CH374芯片

*****************************************************************************************

CH375LIB V2.9 最新更新 2005.12.28

一、修正BUG
 1、在枚举子目录下的文件时，总是返回ERR_MISS_FILE

*****************************************************************************************

CH375LIB V2.8 最新更新 2005.07.29

一、修正BUG
 1、U盘物理总容量在小端数据格式的单片机上不正确
二、更新和增加
 1、增加了对双盘符且首盘为光盘CDROM的U盘的支持
 2、增加了对根目录的打开和关闭操作，使用"/"打开根目录，进行扇区读写，使用后必须关闭，
    便于支持根目录下的长文件名，以及在根目录下搜索文件
 3、增加了CH375vFileSize作为枚举序号，支持最多2147483647个文件，
    原方法只支持最多254个文件，当原方法选择255作为序号时，内部实际使用CH375vFileSize
 4、增加了DISK_OPEN_ROOT状态，在未找到文件时不再置CH375DiskStatus状态，
    去掉了DISK_MISS_DIR和DISK_MISS_FILE状态

*****************************************************************************************

CH375LIB V2.5 最新更新 2005.03.01

一、修正BUG
 1、先插U盘再通电初始化判断结果后返回失败
 2、CH375DiskConnect通过读CH375内部状态位检测连接，避免查询方式下先断开再连接时状态混乱
二、更新和增加
 1、开放变量CH375Version2、CH375vDataStart、CH375vFdtLba、CH375vFdtOffset、CH375vDiskRoot，
    开放子程序CH375ReadBlock和CH375WriteBlock，在.H文件中增加了FAT_DIR_INFO结构，
    增加了EN_CH375LIB_MORE条件编译选项，控制上述允许，用于处理长文件名及修改文件目录项
 2、统一CH375S芯片时的USB设备地址
 3、优化版本检查，增加对CH375A后续版本的支持

*****************************************************************************************

CH375LIB V2.4 最新更新 2005.01.26

一、修正BUG
 1、串口连接CH375S有时在操作时检测不到U盘连接
二、更新和增加
 1、内部开放变量CH375Version2、CH375vDataStart、CH375vFdtOffset、CH375vDiskRoot，
    内部开放子程序CH375ReadBlock和CH375WriteBlock
 2、合并查询方式和中断方式内部代码，去掉CH375LibConfig的位7控制位，更新.H文件中的中断方式
 3、优化程序，增加非关键程序的层次，节约代码量

*****************************************************************************************

CH375LIB V2.3 最新更新 2005.01.12

一、修正BUG
 1、参考WINDOWS技术实现操作重试及缓冲区恢复，否则不支持某些使用较差Flash的U盘
二、更新和增加
 1、在.H文件中去掉了FILE_DATA_BUF_LEN的自动生成
 2、子程序内部去掉CH375FileRead和CH375FileWrite两个子程序，节约内部代码，
    由.H文件提供可由FILE_DATA_BUF_LEN条件编译控制的外部子程序实现向前兼容
 3、在.H文件中对外部程序xWriteToExtBuf和xReadFromExtBuf增加重试时的地址恢复

*****************************************************************************************

本文档中仅保留最近8个历史版本的更新说明，以前版本的更新说明另有文件
*****************************************************************************************
